{"version":3,"sources":["commands/upgrade.ts"],"names":["maybeFormatSdkVersion","sdkVersionString","semver","valid","coerce","getUpdatedDependenciesAsync","projectRoot","workflow","targetSdkVersion","result","exp","pkg","ConfigUtils","readConfigJsonAsync","bundledNativeModules","JsonFile","readAsync","resolveModule","dependencies","devDependencies","Object","keys","forEach","name","log","warn","sdkVersion","expoReactNativeTag","facebookReactNativeVersion","facebookReactVersion","relatedPackages","upgradeAsync","requestedSdkVersion","options","process","cwd","isGitStatusClean","newLine","answer","type","message","ignoreDirtyGit","Versions","gteSdkVersion","attemptOldUpdate","error","CommandError","currentSdkVersionString","sdkVersions","sdkVersionsAsync","latestSdkVersion","newestSdkVersionAsync","latestSdkVersionString","version","targetSdkVersionString","attemptUpdateAgain","updateToLatestSdkVersion","sdkVersionStringOptions","filter","v","gte","selectedSdkVersionString","pageSize","choices","map","value","chalk","bold","attemptUnknownUpdate","packageManager","PackageManager","createForProject","npm","yarn","addNewLineIfNone","underline","addAsync","writeConfigJsonAsync","updates","_","pickBy","_version","has","devDependenciesAsStringArray","dependenciesAsStringArray","length","addDevAsync","green","grey","join","allDependencies","untouchedDependencies","difference","releaseNoteUrl","gray","skippedSdkVersions","_data","lt","gt","skippedSdkVersionKeys","releaseNotesUrls","values","data","releaseNotesUrl","reverse","url","program","command","alias","option","description","asyncAction"],"mappings":"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","file":"../../commands/upgrade.js","sourceRoot":"/expo-cli@3.5.0/src"}